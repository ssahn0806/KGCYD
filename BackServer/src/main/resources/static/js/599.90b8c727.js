"use strict";(self["webpackChunkadmin_vue"]=self["webpackChunkadmin_vue"]||[]).push([[599],{9599:function(t,e,r){r.r(e),r.d(e,{default:function(){return b}});var a=function(){var t=this,e=t._self._c;return e("div",[e("div",{attrs:{id:"board"}},[e("b-card",{attrs:{"bg-variant":"light"}},[e("b-card-img",{staticStyle:{"max-width":"20rem"},attrs:{src:t.url,alt:"등록된이미지가 없습니다"},on:{click:t.openModal}}),e("hr"),e("b-row",{attrs:{"align-h":"center","align-v":"center"}},[e("b-col",{attrs:{cols:"7"}},[t._v("등록할 이미지 첨부")]),e("b-col",{attrs:{cols:"4"}},[e("b-form-file",{attrs:{accept:"image/*",placeholder:"등록할 이미지를 선택하세요.","browse-text":"이미지 찾기"},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1),e("b-col",[e("b-button",{attrs:{variant:"warning"},on:{click:t.clearFileInfo}},[t._v("삭제")])],1)],1),e("hr"),e("b-card-header",{staticStyle:{"border-radius":"10px"},attrs:{"header-bg-variant":"dark","header-border-variant":"dark","header-text-variant":"light"}},[e("b-form-input",{model:{value:t.article.subject,callback:function(e){t.$set(t.article,"subject",e)},expression:"article.subject"}})],1),e("hr"),e("b-row",{attrs:{"align-v":"center","align-h":"center"}},[e("b-col",{attrs:{cols:"4"}},[e("b-row",{attrs:{"align-v":"center"}},[e("b-col",{attrs:{cols:"4"}},[t._v("작성자 아이디")]),e("b-col",[e("b-form-input",{attrs:{readonly:""},model:{value:t.user.userid,callback:function(e){t.$set(t.user,"userid",e)},expression:"user.userid"}})],1)],1)],1),e("b-col",{attrs:{cols:"8"}},[e("b-row",{attrs:{"align-v":"center","align-h":"center"}},[e("b-col",{attrs:{cols:"4"}},[e("b-form-checkbox",{model:{value:t.article.event,callback:function(e){t.$set(t.article,"event",e)},expression:"article.event"}},[t._v("행사 글 여부")])],1),e("b-col",{attrs:{cols:"8"}},[e("b-row",{directives:[{name:"show",rawName:"v-show",value:t.article.event,expression:"article.event"}],attrs:{"align-v":"center"}},[e("b-col",[e("b-button",{attrs:{id:"btn1"},on:{click:function(e){return t.openPop(1)}}},[t._v(t._s(null!=t.article.startEvent?t.article.startEvent:"등록되지 않음"))]),e("b-popover",{attrs:{target:"btn1",title:"행사 시작일",triggers:"click",placement:"bottom",show:t.pop1}},[e("b-calendar",{attrs:{block:""},on:{input:function(e){return t.closePop(1)}},model:{value:t.article.startEvent,callback:function(e){t.$set(t.article,"startEvent",e)},expression:"article.startEvent"}})],1)],1),t._v(" ~ "),e("b-col",[e("b-button",{attrs:{id:"btn2"},on:{click:function(e){return t.openPop(2)}}},[t._v(t._s(t.article.endEvent?t.article.endEvent:"등록되지 않음"))]),e("b-popover",{attrs:{target:"btn2",title:"행사 종료일",triggers:"click",placement:"bottom",show:t.pop2}},[e("b-calendar",{attrs:{block:""},on:{input:function(e){return t.closePop(2)}},model:{value:t.article.endEvent,callback:function(e){t.$set(t.article,"endEvent",e)},expression:"article.endEvent"}})],1)],1)],1)],1)],1)],1)],1),e("hr"),e("b-form-textarea",{attrs:{"max-rows":"14"},model:{value:t.article.content,callback:function(e){t.$set(t.article,"content",e)},expression:"article.content"}}),e("b-row",{staticClass:"mr-0 mt-2",attrs:{"align-h":"end","align-v":"center"}},[e("b-button",{staticClass:"ml-2",attrs:{variant:"primary"},on:{click:function(e){return t.move("/articles")}}},[t._v("취소")]),e("b-button",{staticClass:"ml-2",attrs:{variant:"danger"},on:{click:t.onClickRegist}},[t._v("등록")])],1)],1),e("b-modal",{attrs:{id:"imageViewer",size:"lg","ok-only":"","ok-title":"닫기"}},[e("b-embed",{attrs:{type:"embed",aspect:"4by3",src:t.url,allowfullscreen:""}})],1)],1)])},l=[],i=(r(7658),r(408)),n=r(6731);const s="UserStore";var o={props:{event:{type:String,default:""}},data(){return{article:{},pop1:!1,pop2:!1,file:null,user:{},baseUrl:"http://devsu.iptime.org",subUrl:"/image/view/",url:""}},computed:{...(0,i.rn)(s,["userInfo"])},methods:{openModal(){this.$bvModal.show("imageViewer")},move(t){this.$router.push(t)},onClickRegist(){if(this.article.event&&null==this.article.startEvent&&null==this.article.endEvent)return void alert("행사 글인 경우 기간을 등록해야 합니다.");let t=new FormData;t.append("board",new Blob([JSON.stringify(this.article)],{type:"application/json"})),t.append("upfile",this.file),(0,n.hA)(t,(()=>{this.move("/articles")}))},clearFileInfo(){this.file=null,this.ph=""},openPop(t){1!=t||this.pop1||(this.pop1=!0),2!=t||this.pop2||(this.pop2=!0)},closePop(t){1==t&&this.pop1&&(this.pop1=!1),2==t&&this.pop2&&(this.pop2=!1)},async convertURLtoFile(t){const e=await fetch(t),r=await e.blob(),a=t.split(".").pop(),l=t.split("/").pop(),i={type:`image/${a}`};return new File([r],l,i)}},created(){this.user={...this.userInfo},this.user.userid="owner",this.article.userId=this.user.userid,"e"==this.event&&(this.article.event=!0)},watch:{"article.event"(t){t||(this.article.endEvent||(this.article.endEvent=null),this.article.startEvent||(this.article.startEvent=null))},file(t){if(null!=t){const t=new FileReader;t.onload=t=>{this.url=t.target.result},t.readAsDataURL(this.file)}else this.url=""}}},c=o,u=r(1001),p=(0,u.Z)(c,a,l,!1,null,"f97380ea",null),b=p.exports}}]);
//# sourceMappingURL=599.90b8c727.js.map