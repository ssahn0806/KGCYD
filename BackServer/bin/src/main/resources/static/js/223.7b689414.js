"use strict";(self["webpackChunkadmin_vue"]=self["webpackChunkadmin_vue"]||[]).push([[223],{5223:function(t,e,o){o.r(e),o.d(e,{default:function(){return m}});var r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"home"}},[e("div",{attrs:{id:"container"}},[e("b-row",[e("b-col",[e("b-row",{staticClass:"optionBox"},[e("b-col",{attrs:{cols:"2"}},[e("b-dropdown",{attrs:{id:"search-drop",text:t.dropText,variant:"warning"}},[e("b-dropdown-item",{on:{click:function(e){return t.changeDrop(0)}}},[t._v("카테고리")]),e("b-dropdown-item",{on:{click:function(e){return t.changeDrop(1)}}},[t._v("제품명칭")])],1)],1),e("b-col",{attrs:{cols:"8"}},[0==t.dropOption?[e("b-row",[e("b-col",[e("b-form-select",{attrs:{options:t.mainOpts},on:{change:t.subLoad},model:{value:t.mainCode,callback:function(e){t.mainCode=e},expression:"mainCode"}})],1),e("b-col",[e("b-form-select",{attrs:{options:t.subOpts,disabled:1==t.subOpts.length},on:{change:t.productsLoad},model:{value:t.subCode,callback:function(e){t.subCode=e},expression:"subCode"}})],1)],1)]:t._e(),1==t.dropOption?[e("b-form-input",{attrs:{placeholder:"검색할 제품명을 입력하세요..."},on:{keyup:t.productsLoad},model:{value:t.productName,callback:function(e){t.productName=e},expression:"productName"}})]:t._e()],2),e("b-col",{attrs:{cols:"2"}},[e("b-button",{attrs:{variant:"warning",disabled:!t.canSearch},on:{click:t.productsLoad}},[t._v("조회")])],1)],1)],1),e("b-col",[e("b-row",{attrs:{"align-v":"center","align-h":"center"}},[e("b-col",[e("b-row",{staticClass:"actionBox",attrs:{"align-h":"center","align-v":"center"}},[e("b-col",{attrs:{cols:"4"}},[e("b-form-group",{attrs:{label:"취급여부"},scopedSlots:t._u([{key:"default",fn:function({ariaDescribedby:o}){return[e("b-form-radio-group",{staticClass:"opts",attrs:{options:t.filterOpts1,"aria-describedby":o,disabled:0==t.products.length},model:{value:t.filterOpt1,callback:function(e){t.filterOpt1=e},expression:"filterOpt1"}})]}}])})],1),e("b-col",{attrs:{cols:"4"}},[e("b-form-group",{attrs:{label:"할인여부"}},[e("b-form-radio-group",{staticClass:"opts",attrs:{options:t.filterOpts2,disabled:0==t.products.length},model:{value:t.filterOpt2,callback:function(e){t.filterOpt2=e},expression:"filterOpt2"}})],1)],1),e("b-col",{attrs:{cols:"4"}},[e("vue-slider",{attrs:{dotSize:"12",min:t.priceRange[0],max:t.priceRange[1],interval:t.interval,tooltip:"always",silent:"",adsorb:"","enable-cross":!1,"min-range":t.minRange,"max-range":t.priceRange[1],lazy:"",width:"250px","tooltip-formatter":"{value}만원","tooltip-placement":["bottom","top"],disabled:0==t.productRows},model:{value:t.filterOpt3,callback:function(e){t.filterOpt3=e},expression:"filterOpt3"}})],1)],1)],1)],1)],1)],1),e("b-row",{directives:[{name:"show",rawName:"v-show",value:t.userInfo,expression:"userInfo"}],attrs:{"align-h":"end"}},[e("b-col",{staticClass:"mt-3 mr-1",attrs:{cols:"1"}},[e("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.move("/products/regist")}}},[t._v("제품 등록")])],1)],1),e("hr"),e("b-row",{staticClass:"tableBox"},[e("b-table",{attrs:{id:"product-table","head-variant":"dark",hover:"",striped:"","show-empty":"","primary-key":"productCode","empty-text":"조회된 제품이 없습니다.",items:t.filteredData,fields:t.productField,"per-page":t.productPerPage,"current-page":t.productCurrent},on:{"row-clicked":t.rowEventHandler},scopedSlots:t._u([{key:"cell(composition)",fn:function(e){return[t._v(" "+t._s(e.item.productInfo.composition?e.item.productName+" "+e.item.productInfo.composition:e.item.productInfo.volume?e.item.productName+" "+e.item.productInfo.volume:e.item.productName)+" ")]}}])})],1),e("b-row",{staticClass:"pagination"},[e("b-pagination",{staticClass:"mt-2",attrs:{"total-rows":t.productRows,"per-page":t.productPerPage,"aria-controls":"product-table",align:"center",pills:"",limit:"10"},on:{change:t.changeProduct},model:{value:t.productCurrent,callback:function(e){t.productCurrent=e},expression:"productCurrent"}})],1)],1)])},a=[],s=(o(7658),o(4543)),i=o(6547),n=o.n(i),l=o(408);const c="UserStore",d=["카테고리","제품명칭"];var p={components:{VueSlider:n()},data(){return{dropOption:0,dropText:d[0],mainCode:null,subCode:null,mainOpts:[],subOpts:[],filterOpts1:[{text:"전체",value:0},{text:"취급",value:!0},{text:"미취급",value:!1}],filterOpt1:0,filterOpts2:[{text:"전체",value:0},{text:"정상",value:!1},{text:"할인",value:!0}],filterOpt2:0,filterOpt3:[0,0],filterKeys:["sale","discount","totalPrice"],interval:5,minRange:5,productName:"",products:[],productPerPage:15,productCurrent:1,productRows:178,productField:[{key:"productCode",label:"상품번호",sortable:!0},{key:"mainName",label:"대분류",sortable:!0},{key:"subName",label:"중분류",sortable:!0},{key:"composition",label:"제품명"},{key:"productInfo.sale",label:"판매여부",sortable:!0,formatter:t=>t?"판매":"미취급",tdClass:t=>t?"table-success":"table-danger"},{key:"productInfo.price",label:"정상가격(원)",sortable:!0,formatter:this.getPriceFormat},{key:"productInfo",label:"할인여부",sortable:!0,formatter:t=>t.discount?t.startdiscount<=this.today&&this.today<=t.enddiscount?"행사중":t.startdiscount>this.today?"행사예정":"":"",tdClass:t=>t.discount?t.startdiscount<=this.today&&this.today<=t.enddiscount?"table-info":t.startdiscount>this.today?"table-warning":"":""},{key:"productInfo.discountRate",label:"할인율(%)",sortable:!0,formatter:t=>t>0?t+"%":""},{key:"productInfo.discountPrice",label:"할인금액(원)",sortable:!0,formatter:this.getPriceFormat},{key:"productInfo.totalPrice",label:"판매가격(원)",sortable:!0,formatter:this.getPriceFormat},{key:"productInfo.health",label:"건강기능",sortable:!0,formatter:t=>1==t?"O":"",tdClass:t=>1==t?"table-primary":""},{key:"productInfo.productLevel",label:"BEST",sortable:!0,formatter:t=>1==t?"추천":"",tdClass:t=>1==t?"table-info":""}],canSearch:!1}},methods:{changeDrop(t){this.dropText=d[t],this.dropOption=t},mainLoad(){this.clearOption("main"),this.clearOption("sub"),(0,s.d5)((({data:t})=>{t.map((t=>this.mainOpts.push({value:t.mainCode,text:t.mainName})))}))},subLoad(){this.clearOption("sub"),this.productsLoad(),this.activeBtn(),(0,s.$M)(this.mainCode,(({data:t})=>{t.map((t=>this.subOpts.push({value:t.subCode,text:t.subName})))}))},productsLoad(){switch(this.dropOption){case 0:(0,s.Uu)(this.subCode?this.subCode:this.mainCode,(({data:t})=>{this.products=t,this.productRows=this.products.length}));break;case 1:(0,s.t2)(this.productName,(({data:t})=>{let e=[];t.forEach((t=>{const{category:o,...r}=t;e.push({...o,productInfo:r})})),this.products=e,this.productRows=this.products.length,this.changeProduct(1),this.productCurrent=1}));break}},getPriceFormat(t){const e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")},activeBtn(){this.canSearch=!0},clearOption(t){"main"==t&&(this.mainCode=null,this.subCode=null,this.mainOpts=[{value:null,text:"대분류 선택"}],this.subOpts=[{value:null,text:"중분류 선택"}]),"sub"==t&&(this.subCode=null,this.subOpts=[{value:null,text:"중분류 선택"}]),this.canSearch=!1},rowEventHandler(t){this.move(`/products/detail/${t.productCode}`)},changeProduct(t){window.sessionStorage.setItem("productCurrent",JSON.stringify({page:t}))},move(t){this.$router.push(`${t}`)}},computed:{today(){const t=new Date,e=`${t.getFullYear()}-${t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1}-${t.getDate()<10?"0"+t.getDate():t.getDate()}`;return e},...(0,l.rn)(c,["userInfo"]),priceRange(){return[0,Math.max(...this.products.map((t=>Math.ceil(t.productInfo.price/1e4))))]},filteredData(){return this.products.filter((t=>{let e=!0;return e&=0===this.filterOpt1||t.productInfo[this.filterKeys[0]]===this.filterOpt1,e&=0===this.filterOpt2||t.productInfo[this.filterKeys[1]]===this.filterOpt2,e&=t.productInfo[this.filterKeys[2]]>=1e4*this.filterOpt3[0]&&t.productInfo[this.filterKeys[2]]<=1e4*this.filterOpt3[1],e}))}},created(){this.mainLoad(),(0,s.Uu)("",(({data:t})=>{this.products=t,this.filterOpt3=[0,Math.max(...this.products.map((t=>t.productInfo.price)))/1e4],this.productRows=this.products.length}))},beforeMount(){const t=JSON.parse(window.sessionStorage.getItem("productCurrent"));this.productCurrent=t?t.page:1},watch:{dropOption(t){0==t?(this.mainLoad(),(0,s.Uu)("",(({data:t})=>{this.products=t,this.filterOpt3=[0,Math.max(...this.products.map((t=>t.productInfo.price)))/1e4],this.productRows=this.products.length}))):(this.productName="",this.products=[],this.canSearch=!1),this.filterOpt1=0,this.filterOpt2=0,this.filterOpt3=this.priceRange},productName(t){t.length>=1?this.canSearch=!0:this.canSearch=!1},priceRange(t){this.filterOpt3=t,this.minRange=this.interval=1},filteredData(t){this.productRows=t.length}}},u=p,h=o(1001),b=(0,h.Z)(u,r,a,!1,null,"d98cc906",null),m=b.exports}}]);
//# sourceMappingURL=223.7b689414.js.map